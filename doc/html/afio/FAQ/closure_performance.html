<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>What is the maximum throughput of AFIO's closure execution engine aka how many IOPS can I push with AFIO?</title>
<link rel="stylesheet" href="../../../../libs/afio/doc/html/myboostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../afio.html" title="Chapter&#160;1.&#160;Boost.AFIO 1.30">
<link rel="up" href="../FAQ.html" title="Frequently Asked Questions">
<link rel="prev" href="../FAQ.html" title="Frequently Asked Questions">
<link rel="next" href="closure_latency.html" title="What is the latency of AFIO's closure execution engine aka how quickly can I push a single op with AFIO?">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../FAQ.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../FAQ.html"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../afio.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="closure_latency.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="afio.FAQ.closure_performance"></a><a class="link" href="closure_performance.html" title="What is the maximum throughput of AFIO's closure execution engine aka how many IOPS can I push with AFIO?">What is the maximum throughput
      of AFIO's closure execution engine aka how many IOPS can I push with AFIO?</a>
</h3></div></div></div>
<p>
        For v1.3 of the engine, maximum ops <span class="bold"><strong>dispatch</strong></span>
        throughput is approximately as follows, where the values for <code class="computeroutput"><span class="identifier">call</span><span class="special">()</span></code>
        might be for use as a closure engine whereas the values for <code class="computeroutput"><span class="identifier">completion</span><span class="special">()</span></code>
        might be for max filing system IOPS<sup>[<a name="afio.FAQ.closure_performance.f0" href="#ftn.afio.FAQ.closure_performance.f0" class="footnote">14</a>]</sup>:
      </p>
<div class="table">
<a name="afio.FAQ.closure_performance.throughput"></a><p class="title"><b>Table&#160;1.9.&#160;Maximum null closure dispatch rate on a 3.5Ghz Intel Core i7 3770K
        for AFIO v1.3<sup>[<a name="afio.FAQ.closure_performance.f1" href="#ftn.afio.FAQ.closure_performance.f1" class="footnote">a</a>]</sup></b></p>
<div class="table-contents"><table class="table" summary="Maximum null closure dispatch rate on a 3.5Ghz Intel Core i7 3770K
        for AFIO v1.3
          Benchmarks compiled using address-model=64 link=static --lto release -j 4.
        ">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Operating system
                </p>
              </th>
<th>
                <p>
                  <code class="computeroutput"><span class="identifier">call</span><span class="special">()</span></code>
                  unchained
                </p>
              </th>
<th>
                <p>
                  <code class="computeroutput"><span class="identifier">call</span><span class="special">()</span></code>
                  chained
                </p>
              </th>
<th>
                <p>
                  <code class="computeroutput"><span class="identifier">completion</span><span class="special">()</span></code>
                  unchained
                </p>
              </th>
<th>
                <p>
                  <code class="computeroutput"><span class="identifier">completion</span><span class="special">()</span></code>
                  chained
                </p>
              </th>
<th>
                <p>
                  Raw ASIO
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  Microsoft Windows 8 x64 with Visual Studio 2013
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1175030</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">599038</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1634440</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">743178</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">2558220</span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to ASIO</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">48%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">25%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">69%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">27%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">100%</span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.21</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+2%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+5%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">-11%</span>
                </p>
              </td>
<td>
                <p>
                  []
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.1</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+2%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+5%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">-11%</span>
                </p>
              </td>
<td>
                <p>
                  []
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  Microsoft Windows 8 x64 with Visual Studio 2013
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1133730</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">605569</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1629110</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">647738</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">2376440</span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.1</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+2%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+5%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">-11%</span>
                </p>
              </td>
<td>
                <p>
                  []
                </p>
              </td>
</tr>
<tr>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
</tr>
<tr>
<td>
                <p>
                  Ubuntu 14.04 LTS Linux x64 with GCC 4.9.2
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1002490</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1036150</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1467650</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1199460</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1686100<sup>[<a name="afio.FAQ.closure_performance.f2" href="#ftn.afio.FAQ.closure_performance.f2" class="footnote">b</a>]</sup></span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to ASIO</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">80%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">64%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">92%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">75%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">100%</span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.21</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+18%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+29%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+3%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">100%</span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.1</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+18%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+29%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+3%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">100%</span>
                </p>
              </td>
</tr>
<tr>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
<td>
              </td>
</tr>
<tr>
<td>
                <p>
                  Ubuntu 12.04 LTS Linux x64 with GCC 4.8
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1291250</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1022970</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1479540</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1200450</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">1611040<sup>[<a name="afio.FAQ.closure_performance.f3" href="#ftn.afio.FAQ.closure_performance.f3" class="footnote">c</a>]</sup></span>
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <span class="emphasis"><em>Relative to AFIO v1.1</em></span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+18%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+29%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+3%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">+24%</span>
                </p>
              </td>
<td>
                <p>
                  <span class="alignright">100%</span>
                </p>
              </td>
</tr>
</tbody>
<tbody class="footnotes"><tr><td colspan="6">
<div class="footnote"><p><sup>[<a id="ftn.afio.FAQ.closure_performance.f2" href="#afio.FAQ.closure_performance.f2" class="para">b</a>] </sup>
                    Unfortunately the glibc mutex used by ASIO does not scale well
                    on modern CPUs due to having too small a spin count, so this
                    value is for four threads instead of eight (it was the best I
                    could get through trial and error).
                  </p></div>
<div class="footnote"><p><sup>[<a id="ftn.afio.FAQ.closure_performance.f3" href="#afio.FAQ.closure_performance.f3" class="para">c</a>] </sup>
                    Unfortunately the glibc mutex used by ASIO does not scale well
                    on modern CPUs due to having too small a spin count, so this
                    value is for four threads instead of eight (it was the best I
                    could get through trial and error).
                  </p></div>
</td></tr></tbody>
</table></div>
</div>
<br class="table-break"><p>
        clang 3.4 with concurrent: 177682 157440 184407 138465 122453 clang 3.4 without
        concurrent: 180448 170979 187123 130066
      </p>
<p>
        gcc 4.9 with concurrent: 481860 504530 775678 878487 gcc 4.9 without concurrent:
      </p>
<p>
        We hope that ~600k min IOPS surely ought to be enough to max out any SATA
        III SSD &#8212; it should even max out any mid range PCIe based SSD too,
        and if paired with a CPU with more cores, AFIO's almost wait free design
        ought to scale out fairly well too such that it may be able to max out even
        top end PCIe SSDs, some of which can push 10m IOPS now.
      </p>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a id="ftn.afio.FAQ.closure_performance.f0" href="#afio.FAQ.closure_performance.f0" class="para">14</a>] </sup>
          The phrase <span class="quote">&#8220;<span class="quote">might be</span>&#8221;</span> is important: a null closure benchmark
          will always have dispatch rate problems i.e. the closures being executed
          take less time to execute than the time to dispatch them, so these figures
          are best read as maximum dispatch rate, not maximum IOPS.
        </p></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2015 Niall Douglas
      and Paul Kirth<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../FAQ.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../FAQ.html"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../afio.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="closure_latency.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
