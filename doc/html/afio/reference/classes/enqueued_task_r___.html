<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>enqueued_task&lt; R()&gt;</title>
<link rel="stylesheet" href="../../../../../libs/afio/doc/html/myboostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../../afio.html" title="Chapter&#160;1.&#160;Boost.AFIO 1.30">
<link rel="up" href="../classes.html" title="Classes">
<link rel="prev" href="directory_entry.html" title="directory_entry">
<link rel="next" href="enqueued_task_void___.html" title="enqueued_task&lt; void()&gt;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="directory_entry.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../classes.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../afio.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="enqueued_task_void___.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="afio.reference.classes.enqueued_task_r___"></a><a class="link" href="enqueued_task_r___.html" title="enqueued_task&lt; R()&gt;">enqueued_task&lt;
        R()&gt;</a>
</h4></div></div></div>
<p>
          <a class="indexterm" name="idp18805088"></a>
Effectively our own custom std::packaged_task&lt;&gt;, with copy semantics
          and letting us early set value to significantly improve performance.
        </p>
<h6>
<a name="afio.reference.classes.enqueued_task_r___.h0"></a>
          <span><a name="afio.reference.classes.enqueued_task_r___.description"></a></span><a class="link" href="enqueued_task_r___.html#afio.reference.classes.enqueued_task_r___.description">Description</a>
        </h6>
<p>
          Unlike <code class="literal"><code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">packaged_task</span><span class="special">&lt;&gt;</span></code></code>,
          this custom variant is copyable though each copy always refers to the same
          internal state. Early future value setting is possible, with any subsequent
          value setting including that by the function being executed being ignored.
          Note that this behaviour opens the potential to lose exception state -
          if you set the future value early and then an exception is later thrown,
          the exception is swallowed.
        </p>
<h6>
<a name="afio.reference.classes.enqueued_task_r___.h1"></a>
          <span><a name="afio.reference.classes.enqueued_task_r___.synopsis"></a></span><a class="link" href="enqueued_task_r___.html#afio.reference.classes.enqueued_task_r___.synopsis">Synopsis</a>
        </h6>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">R</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">enqueued_task</span><span class="special">&lt;</span> <span class="identifier">R</span><span class="special">()&gt;</span>
      <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">detail</span><span class="special">::</span><span class="identifier">enqueued_task_impl</span><span class="special">&lt;</span> <span class="identifier">R</span> <span class="special">&gt;</span>
<span class="special">{</span>
  <span class="comment">// ...</span>
<span class="special">};</span>
</pre>
<h6>
<a name="afio.reference.classes.enqueued_task_r___.h2"></a>
          <span><a name="afio.reference.classes.enqueued_task_r___.template_parameter_s"></a></span><a class="link" href="enqueued_task_r___.html#afio.reference.classes.enqueued_task_r___.template_parameter_s">Template
          parameter(s)</a>
        </h6>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Parameter
                  </p>
                </th>
<th>
                  <p>
                    Description
                  </p>
                </th>
</tr></thead>
<tbody><tr>
<td>
                  <p>
                    class R
                  </p>
                </td>
<td>
                  <p>
                    The return type of the callable which must be without parameters.
                  </p>
                </td>
</tr></tbody>
</table></div>
<h6>
<a name="afio.reference.classes.enqueued_task_r___.h3"></a>
          <span><a name="afio.reference.classes.enqueued_task_r___.member_function_s"></a></span><a class="link" href="enqueued_task_r___.html#afio.reference.classes.enqueued_task_r___.member_function_s">Member
          Function(s)</a>
        </h6>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Function
                  </p>
                </th>
<th>
                  <p>
                    Description
                  </p>
                </th>
<th>
                  <p>
                    Parameters
                  </p>
                </th>
<th>
                  <p>
                    Returns
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span></pre>
                </td>
<td>
                  <p>
                    Returns true if valid.
                  </p>
                </td>
<td>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">enqueued_task_impl</span> <span class="special">&amp;</span> <span class="identifier">o</span><span class="special">)</span></pre>
                </td>
<td>
                  <p>
                    Swaps contents with another instance.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>enqueued_task_impl &amp;</strong></span>: <span class="emphasis"><em>o</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">reset</span><span class="special">()</span></pre>
                </td>
<td>
                  <p>
                    Resets the contents.
                  </p>
                </td>
<td>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">set_task</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="identifier">R</span><span class="special">()&gt;</span> <span class="identifier">_task</span><span class="special">)</span></pre>
                </td>
<td>
                  <p>
                    Sets the task.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>std::function&lt; R()&gt;</strong></span>:
                    <span class="emphasis"><em>_task</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">const</span> <span class="identifier">shared_future</span><span class="special">&lt;</span> <span class="identifier">R</span> <span class="special">&gt;</span> <span class="special">&amp;</span> <span class="identifier">get_future</span><span class="special">()</span></pre>
                </td>
<td>
                  <p>
                    Returns the shared future corresponding to the future return
                    value of the task.
                  </p>
                </td>
<td>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">set_future_value</span><span class="special">(</span><span class="identifier">T</span> <span class="identifier">v</span><span class="special">)</span></pre>
                </td>
<td>
                  <p>
                    Sets the shared future corresponding to the future return value
                    of the task.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>T</strong></span>: <span class="emphasis"><em>v</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">set_future_value</span><span class="special">()</span></pre>
                </td>
<td>
                </td>
<td>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">set_future_exception</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">e</span><span class="special">)</span></pre>
                </td>
<td>
                  <p>
                    Sets the shared future corresponding to the future return value
                    of the task.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>exception_ptr</strong></span>: <span class="emphasis"><em>e</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="identifier">disable_auto_set_future</span><span class="special">(</span><span class="keyword">bool</span> <span class="identifier">v</span> <span class="special">=</span> <span class="keyword">true</span><span class="special">)</span></pre>
                </td>
<td>
                  <p>
                    Disables the task setting the shared future return value.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>bool</strong></span>: <span class="emphasis"><em>v</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="identifier">enqueued_task</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="identifier">R</span><span class="special">()&gt;</span> <span class="identifier">_task</span> <span class="special">=</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="identifier">R</span><span class="special">()&gt;())</span></pre>
                </td>
<td>
                  <p>
                    Default constructor.
                  </p>
                </td>
<td>
                  <p>
                    <span class="bold"><strong>std::function&lt; R()&gt;</strong></span>:
                    <span class="emphasis"><em>_task</em></span>:
                  </p>
                </td>
</tr>
<tr>
<td>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()()</span></pre>
                </td>
<td>
                  <p>
                    Invokes the callable, setting the shared future to the value
                    it returns.
                  </p>
                </td>
<td>
                </td>
</tr>
</tbody>
</table></div>
<h6>
<a name="afio.reference.classes.enqueued_task_r___.h4"></a>
          <span><a name="afio.reference.classes.enqueued_task_r___.header"></a></span><a class="link" href="enqueued_task_r___.html#afio.reference.classes.enqueued_task_r___.header">Header</a>
        </h6>
<p>
          <code class="computeroutput"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">afio</span><span class="special">/</span><span class="identifier">afio</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2015 Niall Douglas
      and Paul Kirth<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="directory_entry.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../classes.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../afio.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="enqueued_task_void___.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
